<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Grade Calculator Platform</title>
<style>
  body {
    font-family: Arial, sans-serif;
    padding: 20px;
    max-width: 600px;
    margin: auto;
  }
  h2, h3 {
    text-align: center;
  }
  #subjectsContainer .subject {
    margin-bottom: 15px;
  }
  input, select, button {
    padding: 8px;
    margin: 5px 0;
    width: 100%;
    box-sizing: border-box;
  }
  button {
    width: auto;
    cursor: pointer;
  }
  #addSubject {
    margin-bottom: 20px;
  }
  #cgpaResult {
    font-size: 1.2em;
    margin-top: 20px;
    text-align: center;
  }
</style>
</head>
<body>
  <!-- Grade Section (always visible) -->
  <section id="gradeSection" style="text-align:center;">
    <h2>CGPA Calculator</h2>

    <form id="cgpaForm">
      <div id="subjectsContainer">
        <div class="subject">
          <input type="text" name="subject[]" placeholder="Subject Name" required />
          <input type="number" name="credits[]" placeholder="Credits" min="1" required />
          <select name="grade[]" required>
            <option value="">Select Grade</option>
            <option value="10">A+</option>
            <option value="9">A</option>
            <option value="8">B+</option>
            <option value="7">B</option>
            <option value="6">C+</option>
            <option value="5">C</option>
            <option value="4">D</option>
            <option value="3">E</option>
            <option value="2">F</option>
          </select>
        </div>
      </div>
      <button type="button" id="addSubject">+ Add Subject</button>
      <button type="submit">Calculate CGPA</button>
    </form>

    <h3 id="cgpaResult"></h3>
  </section>

<script>
  const subjectsContainer = document.getElementById("subjectsContainer");
  const addSubjectBtn = document.getElementById("addSubject");
  const cgpaForm = document.getElementById("cgpaForm");
  const cgpaResult = document.getElementById("cgpaResult");

  addSubjectBtn.addEventListener("click", () => {
    const div = document.createElement("div");
    div.classList.add("subject");
    div.innerHTML = `
      <input type="text" name="subject[]" placeholder="Subject Name" required />
      <input type="number" name="credits[]" placeholder="Credits" min="1" required />
      <select name="grade[]" required>
        <option value="">Select Grade</option>
        <option value="10">A+</option>
        <option value="9">A</option>
        <option value="8">B+</option>
        <option value="7">B</option>
        <option value="6">C+</option>
        <option value="5">C</option>
        <option value="4">D</option>
        <option value="3">E</option>
        <option value="2">F</option>
      </select>
    `;
    subjectsContainer.appendChild(div);
  });

  cgpaForm.addEventListener("submit", (e) => {
    e.preventDefault();
    const credits = [...document.getElementsByName("credits[]")].map(c => Number(c.value));
    const grades = [...document.getElementsByName("grade[]")].map(g => Number(g.value));

    let totalCredits = 0, totalPoints = 0, hasFail = false;
    for (let i = 0; i < credits.length; i++) {
      totalCredits += credits[i];
      totalPoints += credits[i] * grades[i];
      if (grades[i] <= 2) hasFail = true;
    }

    if (totalCredits > 0) {
      const cgpa = (totalPoints / totalCredits).toFixed(2);
      cgpaResult.textContent = hasFail
        ? `Your CGPA is: ${cgpa} ⚠️ (Fail in one or more subjects)`
        : `Your CGPA is: ${cgpa}`;
      cgpaResult.style.color = hasFail ? "red" : "green";
    } else {
      cgpaResult.textContent = "Please enter valid subjects.";
      cgpaResult.style.color = "black";
    }
  });
</script>
</body>
</html>
